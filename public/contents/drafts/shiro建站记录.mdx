---
title: "shiro建站记录"
slug: "shiro-setup"
published: true
createdAt: "2024-01-29"
updatedAt: "2024-02-01"
category: "website"
description: "innei 神!"
cover: 'https://s3-yume.s3.ap-northeast-1.amazonaws.com/sodayo.webp'
---

## 前言

其实很早就盯上 innei 的 shiro 主题了。真的很有简约的美感！！！还记得从群友的链接点过来的时的震撼，无奈当时的水平有限，对于这种类型的项目部署毫无头绪，在逛了一圈之后还是回去拥抱 hexo 博客了

或者说，懒（

然而在 24 年的开头，我刷到了[一只鬆](https://sotkg.link/)的部署教程，原本只是想当个乐子看看，然而一看修改时间——woc，前两天的？

于是直接行动，期间似乎还遇到了 shiro 的某次更新，导致 mx-space 的部署都卡了整整一天，反代看的人都要昏头了 qwq，期间还在宝塔和 1panel 切换过一次，后来实在人昏掉了，去问了一下一只鬆大佬

虽然他也没有找出什么问题，不过在排除配置问题之后，果然 remake 一次就好了，现在我也有 shiro 博客辣^^

然后这里就放一些建站补充，以及未来如果做了魔改就在这里同步一些，我已经受够了之前在 hexo 里踩的坑了

基于 https://sotkg.link/posts/site/8.html 和官方文档

## mx-space

宝塔的反代不知道为啥反正莫名其妙有点问题，而且 ui 也不如 1panel 好看，我的评价是：快跑

首先是 1panel，如果是云服务器要在安全组里把对应的端口打开，也就是防火墙，有 80、443 之类端口的东东，建议留个书签，否则每次都要去看看 user-info 里的那个判断权限的值是多少，比较繁琐

反代如果直接在 1panel 的总配置里写会有多个 `location /`导致的报错，注意到 `include /www/sites/www.sayoriqwq.site/proxy/*.conf;` ，这里有一个专门的反代配置，在`源文`里修改就好了，这个是当时创建网站的时候带的反代配置，可以直接替换

一定要配置 https 才可以访问到 mx-space。我是在阿里云上嫖的免费证书，把对应的后端域名放上去，填一条解析记录，审核下来之后就好啦

不得不说，有一个这样的中后台管理是真好啊，hexo 博客的维护和这个完全没法比，太方便了（让我看看怎么写的，狠狠偷点代码😈）


## shiro

记得同步最新的 fork

可以看到 github 上当前的部署状态，如果这里有问题的话也许并不是配置的锅，可能正在更新版本之类的？

## 云函数

json 数据里别留空字符串，不想要的项全删了或者至少随便写个值上去，控制台有个报错直接导致白屏了 qwq

## 其他

服务器最好还是 2g 以上吧，我当时不知道需要多少，嫖的阿里 300 卷 2c1g 服务器，服务器老崩溃，需要重启，真是心力交瘁

甚至这条博客写完之后就崩了，啊啊啊啊啊啊啊啊啊

mx-space 更新还挺勤，这几天过了俩bug号了

2024/1/29 换了一个 2g 的服务器 qwq

## 踩坑

2024/2/1 .env 配置问题

如果出现某些页面一直打不开的情况，打开控制台看到跨域错误，就可以去检查一下.env 文件的配置

感谢这个 issue https://github.com/mx-space/core/issues/916

我的问题：前端域名需要加上`www`

2024/2/1 更新 mx-space 问题

昨天`https://server.sayoriqwq.site/qaqdmin`莫名奇妙就登不上了，我这几天都没有动过一点配置，感觉很奇怪。而且前端表现大部分正常。

通过`/proxy`路径访问本地，也可以撰写博文之类的，一直找不到问题，后来看到面板似乎可以更新，于是重新拉了一下 docker，然后就解决了

具体原因是什么我也不清楚qwq，遇到报错不就是重启+更新吗（